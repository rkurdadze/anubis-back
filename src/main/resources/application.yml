spring:
  application:
    name: anubis

  datasource:
    url: ${ANUBIS_DB_URL:jdbc:postgresql://localhost:5432/anubis}
    username: ${ANUBIS_DB_USER:postgres}
    password: ${ANUBIS_DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    open-in-view: false
    show-sql: false

  flyway:
    enabled: true
    baseline-on-migrate: true
    locations: classpath:db/migration
    placeholders:
      schema: public

server:
  port: 4100

logging:
  level:
    root: INFO
    org.flywaydb: INFO

# ==========================
# üîç ANUBIS Custom Settings
# ==========================
anubis:
  # --------------------------
  # üß† OCR Configuration (Tesseract + Tika)
  # --------------------------
  ocr:
    enabled: true                                 # –≤–∫–ª—é—á–∏—Ç—å OCR
    datapath: ${ANUBIS_OCR_DATAPATH:/usr/share/tesseract-ocr/5/tessdata}
    languages: ${ANUBIS_OCR_LANGUAGES:kat+eng+rus}  # –≥—Ä—É–∑–∏–Ω—Å–∫–∏–π, –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, —Ä—É—Å—Å–∫–∏–π
    psm: ${ANUBIS_OCR_PSM:3}                      # Page Segmentation Mode (3 = auto)
    oem: ${ANUBIS_OCR_OEM:1}                      # OCR Engine Mode (1 = LSTM)
  language-detect:
    enabled: ${ANUBIS_LANGUAGE_DETECT_ENABLED:true}
  tika:
    max-content-length: ${ANUBIS_TIKA_MAX_CONTENT_LENGTH:10485760}  # 10 MB
    parse-timeout-seconds: ${ANUBIS_TIKA_TIMEOUT:30}

  # --------------------------
  # üíæ File Storage Settings
  # (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
  # --------------------------
  storage:
    temp-dir: ${ANUBIS_STORAGE_TMP:/tmp/anubis}
    external-base-path: ${ANUBIS_STORAGE_FS:/data/anubis}